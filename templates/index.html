<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SO-ARM101 Controller</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¤– SO-ARM101 Controller</h1>
            <p class="subtitle">ContrÃ´leur Web pour Bras Robotique</p>
        </header>

        <!-- Section Connexion -->
        <section class="card">
            <h2>ğŸ”Œ Connexion</h2>
            <div class="connection-panel">
                <div class="input-group">
                    <label for="port-input">Port:</label>
                    <input type="text" id="port-input" value="COM3" placeholder="COM3">
                    <button id="connect-btn" class="btn btn-primary">Connecter</button>
                </div>
                <div class="status-indicator">
                    <span id="status-text" class="status-disconnected">DÃ©connectÃ©</span>
                </div>
            </div>
        </section>

        <!-- Section ContrÃ´le -->
        <section class="card">
            <h2>ğŸ® ContrÃ´le</h2>
            <div class="control-buttons">
                <button id="read-positions-btn" class="btn btn-secondary">ğŸ“Š Lire Positions</button>
                <button id="release-btn" class="btn btn-secondary">ğŸ”“ RelÃ¢cher Moteurs</button>
                <button id="lock-btn" class="btn btn-secondary">ğŸ”’ Verrouiller Moteurs</button>
                <button id="home-btn" class="btn btn-secondary">ğŸ  Position Home</button>
            </div>
        </section>

        <!-- Section Sliders -->
        <section class="card">
            <h2>ğŸšï¸ ContrÃ´le Manuel des Moteurs</h2>
            <div class="sliders-control">
                <div class="slider-toggle">
                    <label class="checkbox-label">
                        <input type="checkbox" id="slider-enable-checkbox">
                        <span>âœ“ Activer contrÃ´le par sliders</span>
                    </label>
                    <button id="refresh-calib-btn" class="btn btn-small">â†» RafraÃ®chir calibration</button>
                </div>
                <div id="sliders-container"></div>
            </div>
        </section>

        <!-- Section Enregistrement -->
        <section class="card">
            <h2>âºï¸ Enregistrement / Lecture</h2>
            <div class="recording-panel">
                <div class="input-group">
                    <label for="interval-input">Intervalle (ms):</label>
                    <input type="number" id="interval-input" value="100" min="10" max="1000">
                </div>
                <div class="recording-controls">
                    <button id="record-btn" class="btn btn-success">âº Enregistrer</button>
                    <button id="stop-record-btn" class="btn btn-danger" disabled>â¹ Stop</button>
                    <button id="save-btn" class="btn btn-info">ğŸ’¾ Sauvegarder</button>
                    <button id="load-btn" class="btn btn-info">ğŸ“‚ Charger</button>
                    <input type="file" id="file-input" accept=".json" style="display: none;">
                    <button id="play-btn" class="btn btn-success">â–¶ Lire</button>
                    <button id="stop-play-btn" class="btn btn-danger" disabled>â¸ Stop Lecture</button>
                </div>
                <div id="record-status" class="record-status"></div>
                <div id="playback-progress-container" class="playback-progress-container" style="display: none;">
                    <div class="progress-info">
                        <span id="progress-text">0 / 0 frames</span>
                        <span id="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar-wrapper">
                        <div id="progress-bar" class="progress-bar"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Outils -->
        <section class="card">
            <h2>ğŸ”§ Outils</h2>
            <div class="tools-buttons">
                <button id="setup-motors-btn" class="btn btn-warning">ğŸ”§ Setup Moteurs</button>
                <button id="calibrate-btn" class="btn btn-warning">ğŸ“ Calibrer</button>
                <button id="find-port-btn" class="btn btn-warning">ğŸ” Trouver Port</button>
            </div>
        </section>

        <!-- Section Calibration Modal -->
        <div id="calibration-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>ğŸ“ Calibration des Moteurs</h2>
                <div class="modal-tabs">
                    <button class="tab-btn active" data-tab="auto">ğŸ”§ Automatique</button>
                    <button class="tab-btn" data-tab="manual">âœ‹ Manuelle</button>
                </div>
                
                <div id="auto-tab" class="tab-content active">
                    <p>Cette fonction va trouver les limites min/max de chaque moteur.</p>
                    <p class="warning">âš ï¸ Assurez-vous que le robot a de l'espace pour bouger !</p>
                    <div class="motor-selection">
                        <h3>Moteurs Ã  calibrer:</h3>
                        <div id="motor-checkboxes"></div>
                    </div>
                    <button id="start-auto-calib-btn" class="btn btn-primary">â–¶ DÃ©marrer la Calibration</button>
                    <div id="auto-calib-log" class="calib-log"></div>
                </div>
                
                <div id="manual-tab" class="tab-content">
                    <div class="manual-controls">
                        <button id="release-all-btn" class="btn btn-secondary">ğŸ”“ RelÃ¢cher TOUS</button>
                        <button id="lock-all-btn" class="btn btn-secondary">ğŸ”’ Verrouiller TOUS</button>
                    </div>
                    <div id="manual-calib-container" class="manual-calib-container"></div>
                </div>
            </div>
        </div>

        <!-- Section Log -->
        <section class="card">
            <h2>ğŸ“‹ Journal</h2>
            <div id="log-container" class="log-container"></div>
        </section>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>

